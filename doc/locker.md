# 画面ロッカーの選定と設定

## 画面ロッカー
### LightDM
依存関係の少ないディスプレイマネージャの1つ．
自身の機能として画面ロック機能を持っている．
greeterと呼ばれるアドオンを使用して，画面ロック機能のカスタマイズが可能．
`dm-tool lock`で画面をロックする．
セキュリティ的にLightDM単体での画面ロック機能は推奨されていないらしい．
個人での利用範囲であれば，自動ログインを有効にして別のロッカーソフトウエアを自動起動させることで，併用が可能．
その場合は`/etc/lightdm/lightdm.conf`の以下の項目を有効にする．
```
autologin-user=username
autologin-session=session
```
またパスワードを入力しないで自動でログインするためにはユーザが`autologin`グループに入っている必要がある．
```
groupadd -r autologin
gpasswd -a username autologin
```

### Light-Locker
LightDMに依存するロッカーソフトウェア．
`light-locker-command -l`でLightDMの画面ロック機能を呼び出す．
時間経過による自動ロックやスリープやサスペンドにフックして画面ロックするなどの機能を提供する．
シンプルで使いやすいが，systemd 243（2019-10最新）との相性が悪くハングアップする．

### i3lock
i3wmに付属するロッカーソフトウェア．
画面ロック機能のみを提供するため，適切に動作させるためにはsystemdなどを用いてイベントにフックさせる必要がある．
`i3lock -c 000000`などで起動する．`-c`オプションのあとに16進数のカラーコードでロック画面の色を設定できる．`-i`オプションで画像を設定できる（PNGのみ）．
派生ソフトウェアとしてi3lock-fancyやi3lock-fancy-rapidなどが存在し，前者はぼかし機能やロック中のテキスト表示が可能な一方で画像処理の速度に難があり，後者は前者と比較して高速だが低機能である．


## Systemd
### xautolock
i3lockなどを用いる場合，時間経過による画面の自動ロック等を自分で設定する必要がある．
xautolockはシンプルに無操作時間が設定値に到達した場合にロッカーソフトウェアを起動する機能を提供する．
特定のイベントにフックしたり，動画視聴中に自動ロックしない設定等は自分で用意する必要がある．
`xautolock -time 5 -locker "i3lock-fancy-rapid 5 3" -detectsleep`で無操作5分で画面をロックする（常駐させる）．

### xss-lock
こちらはDPMSやsystemdのイベントをトリガーとして，ロッカーソフトウェアを起動する．
イベントをフックするだけなので，画面消灯は自分で設定する必要がある．
DPMSによる画面消灯は`xset s 300 300 dpms 300 300`などで設定する．
systemdの`suspend`，`hibernate`などもフックして画面ロックする．
DPMSに依存するため，動画視聴中などは自動でロックされない．

また任意のイベントにフックするように設定することはできない（強引に解決することは恐らく可能だが）．
`xss-lock 3lock-fancy-rapid 5 3`で特定のイベントをトリガーに画面をロックする（同じくsystemdか何かでプログラムを常駐させる）．
